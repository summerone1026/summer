<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>顶部选项卡-可左右拖动</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" href="../css/mui.min.css">
	</head>
	
	<body>
		<style>
			html,
			body {
				background-color: #efeff4;
			}
			.mui-slider {
				height: 100%;
			}
/* 			.mui-table-view .mui-media-object{
				max-width: 60%;
				height: 9.25rem
			} */
			.mui-media-object{
				border-radius:8px 8px 8px 8px
			}	
        </style>
		
		<div class="mui-content mui-fullscreen" id="pullrefresh">
			<div id="slider" class="mui-slider">
				<div id="sliderSegmentedControl" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
					<div class="mui-scroll">
						<a class="mui-control-item" href="#item1mobile">国产高清</a>
						<a class="mui-control-item" href="#item2mobile">日韩女优</a>
						<a class="mui-control-item" href="#item3mobile">欧美激情</a>
						<a class="mui-control-item" href="#item4mobile">高清无码</a>
						<a class="mui-control-item" href="#item5mobile">明星换脸</a>
						<a class="mui-control-item" href="#item6mobile">网红主播</a>
						<a class="mui-control-item" href="#item7mobile">成人动漫</a>
						<a class="mui-control-item" href="#item8mobile">偷拍自拍</a>
						<a class="mui-control-item" href="#item9mobile">人妻熟女</a>
						<a class="mui-control-item" href="#item10mobile">中文字幕</a>
						<a class="mui-control-item" href="#item11mobile">SM专区</a>
						<!-- <a class="mui-control-item" href="#item12mobile">水下特辑</a> -->
						<a class="mui-control-item" href="#item13mobile">小视频</a>
						<a class="mui-control-item" href="#item14mobile">女优专栏</a>
						<a class="mui-control-item" href="#item15mobile">三级电影</a>						
					</div>
				</div>
				
				<div class="mui-slider-group">
					<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
						<div id="scroll1" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item2mobile" class="mui-slider-item mui-control-content">
						<div id="scroll2" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>

					<div id="item3mobile" class="mui-slider-item mui-control-content">					
						<div id="scroll3" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item4mobile" class="mui-slider-item mui-control-content">					
						<div id="scroll4" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item5mobile" class="mui-slider-item mui-control-content">					
						<div id="scroll5" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item6mobile" class="mui-slider-item mui-control-content">
						<div id="scroll6" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item7mobile" class="mui-slider-item mui-control-content">
						<div id="scroll7" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item8mobile" class="mui-slider-item mui-control-content">
						<div id="scroll8" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item9mobile" class="mui-slider-item mui-control-content">
						<div id="scroll9" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item10mobile" class="mui-slider-item mui-control-content">
						<div id="scroll10" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item11mobile" class="mui-slider-item mui-control-content">
						<div id="scroll11" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
<!-- 					<div id="item12mobile" class="mui-slider-item mui-control-content">
						<div id="scroll12" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div> -->
					
					<div id="item13mobile" class="mui-slider-item mui-control-content">
						<div id="scroll13" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item14mobile" class="mui-slider-item mui-control-content">
						<div id="scroll14" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>
					
					<div id="item15mobile" class="mui-slider-item mui-control-content">
						<div id="scroll15" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-grid-view">
										
								</ul>
							</div>
						</div>
					</div>					
				</div>
			</div>
		</div>
		
		<script src="../js/mui.min.js"></script>
		<script src="../js/mui.pullToRefresh.js"></script>
		<script src="../js/mui.pullToRefresh.material.js"></script>
		<script src="../js/lib/art-template.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/lib/common.js"></script>
		<script src="../js/type.js"></script>
		<script>
			(function ($) {
				//阻尼系数
				var deceleration = mui.os.ios ? 0.003 : 0.0009;
				$('.mui-scroll-wrapper').scroll({
					bounce: false,
					indicators: true, //是否显示滚动条
					deceleration: deceleration
				});
				//因为是三个不同的区块，每一个页数不一样，所以要存不同的页数
				var pageNum=null;
				var pageNum1=1;
				var pageNum2=1;
				var pageNum3=1;
				var pageNum4=1;
				var pageNum5=1;
				var pageNum6=1;
				var pageNum7=1;
				var pageNum8=1;
				var pageNum9=1;
				var pageNum10=1;
				var pageNum11=1;
				var pageNum12=1;
				var pageNum13=1;
				var pageNum14=1;
				var pageNum15=1;												
				$.ready(function () {
					//循环初始化所有下拉刷新，上拉加载。
					$.each(document.querySelectorAll('.mui-slider-group .mui-scroll'), function (index, pullRefreshEl) {
						$(pullRefreshEl).pullToRefresh({
							up: {
								auto: true, //自动执行一次上拉加载，可选；
								show: false, //显示底部上拉加载提示信息，可选；      
								contentrefresh: '尊敬的客官，玖玖小姐姐正在努力加载中...', //上拉进行中提示信息
								contentnomore: '尊敬的客官，玖玖小姐姐是有底线的哟！', //上拉无更多信息时提示信息
								style: mui.os.android ? "circle" : "default",
								callback:function () {
									var self = this;                  
									setTimeout(function () {
									//获取三个不同的区块显示的位置
										var ul = self.element.querySelector('.mui-table-view');
										if(index == 0){//全部选项卡的index是0，当显示它的时候，滑动页面加1，调数据，以下以此类推
											pageNum=pageNum1++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 1){
											pageNum=pageNum2++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 2){
											pageNum=pageNum3++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 3){
											pageNum=pageNum4++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 4){
											pageNum=pageNum5++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 5){
											pageNum=pageNum6++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 6){
											pageNum=pageNum7++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 7){
											pageNum=pageNum8++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 8){
											pageNum=pageNum9++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 9){
											pageNum=pageNum10++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 10){
											pageNum=pageNum11++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 11){
											pageNum=pageNum12++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 12){
											pageNum=pageNum13++;
											createFragment(ul, index,self,pageNum);
										}else if(index == 13){
											pageNum=pageNum14++;
											createFragment(ul, index,self,pageNum);
										}
									}, 1000);
								}
							}
						});
					});
				});
			})(mui);
			function createFragment(ul, index,self,pageNum) {
				var fragment = document.createDocumentFragment();
				var type = null;
				if(index == 0){
					type=VideoType.CHINESE_HD;
				}else if(index == 1){
					type=VideoType.JAPAN_STAR;
				}else if(index == 2){
					type=VideoType.EUROPE;
				}else if(index == 3){
					type=VideoType.HD_NO_CODE;
				}else if(index == 4){
					type=VideoType.STAR_CHANGE_FACE;
				}else if(index == 5){
					type=VideoType.INTERNET_STAR;
				}else if(index == 6){
					type=VideoType.ANIME;
				}else if(index == 7){
					type=VideoType.CANDID;
				}else if(index == 8){
					type=VideoType.ANOTHER_WIFE;
				}else if(index == 9 ){
					type= VideoType.CHINESE_FONT;
				}else if(index == 10){
					type=VideoType.SM_COLUMN;
				}else if(index == 11){
					type=VideoType.MICRO_VIDEOS;
				}else if(index == 12){
					type=VideoType.ACTRESS_COLUMN;
				}else if(index == 13){
					type= VideoType.LEVEL3;
				}
				
				var page_size = 10;//传给后台的参数，想要几条数据
				var data = {
					offset : pageNum * page_size - page_size,
					limit : page_size,
					type : type
				};
				//请求后台数据
				mui.getJSON(APP_DOMAIN + "/videos", data, function (info) {
					
					if(info.length == 0){//当info.length为0时，表示没有数据了
						self.endPullUpToRefresh(true);//当为true时，底部出现没有更多数据，并且不能滑动
					}else{
						for (var i = 0; i < info.length; i++) {
							video = info[i];
							var str='';
							var li = document.createElement('li');
							li.className = "mui-table-view-cell mui-media mui-col-xs-6";
							li.id =  video["vod_id"] ;
							str+='<img class="mui-media-object" src="' + video["vod_pic"] + '"/>'
							+'<div class="mui-media-body">' + video["vod_name"]
							+'<p class="mui-ellipsis">播放次数:' + video["vod_hits"] + '</p>'
							+'<a id="videoURL" href="' + video["vod_play_url"] + '"></a>'
							+ '</div>';
							li.innerHTML=str;
							fragment.appendChild(li);
						}
						ul.appendChild(fragment);//注意一定要插入使用appendChild，不是替换里面的数据用innerHTML,否则会出现没有文字提醒以及会出现很大的空白区
						self.endPullUpToRefresh();//当为false或空时，底部出现正在加载，滑动到下一页
					}
				});
			};
		</script>
		
	</body>
</html>
